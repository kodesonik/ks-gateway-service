
#variables
@base_url = http://localhost/api/v1
@bearer = Bearer
@access_token = {{refreshToken.response.body.access_token}} 
@refresh_token = {{login.response.body.refresh_token}}
@otp_token = {{send_otp.response.body.access_token}}
@confirm_token = {{register.response.body.access_token}}


# @name test
GET {{base_url}}
x-lang: fr
### 

# @name get_docs
GET http://localhost/docs
###

# @name register
POST {{base_url}}/auth/register
Content-Type: application/json

{
    "firstname": "AMADOU",
    "lastname": "Arouna",
    "email": "k0d3.s0n1k@gmail.com",
    "username": "ks",
    "password": "password",
    "phone": "+22892942604",
    "birthdate": "2010-01-01",
    "address": "Jl. Jend. Sudirman No. 1",
    "parrain": "dse4543f"
}
### 

# Confirm account
# @name confirm_account
POST {{base_url}}/auth/confirm-account
Content-Type: application/json
Authorization: {{bearer}} {{confirm_token}}

{
    "otp": "772479"
}
###

# @name verify_otp
# @prompt otp Enter OTP
POST {{base_url}}/auth/verify
Content-Type: application/json

{
    "otp": "{{otp}}"
}
### 

# @name login
POST {{base_url}}/auth/login
Content-Type: application/json

{
    "username": "root",
    "password": "fnyky1rj"
}
###

# @name get_profile
GET {{base_url}}/auth/profile HTTP/1.1
Content-Type: application/json
Accept: application/json
Authorization: {{bearer}} eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY2ZDgzYzEyY2UyNmIwZjM3Y2JhOGFjMyIsImxhc3RuYW1lIjoicm9vdCIsImZpcnN0bmFtZSI6InJvb3QiLCJ1c2VybmFtZSI6InJvb3QiLCJwaG9uZSI6MjI4OTI5NDI2MDEsImVtYWlsIjoiYXJvYW1hZG91MUBnbWFpbC5jb20iLCJnZW5kZXIiOiJVIiwicm9sZSI6ImFkbWluIiwiZGVmYXVsdFVzZXJuYW1lIjpmYWxzZSwiYXV0aE1ldGhvZHMiOltdLCJwYXNzd29yZCI6IiQyYiQxMCRuT0F5QkpCVDRTYlYuck5lcjlJQ1llNEJjNWZzMXFJRUEweERmT3Q1L2lnVFJ6WmpFb2YuTyIsImlzQWN0aXZlIjp0cnVlLCJjb21wbGV0ZWQiOmZhbHNlLCJpbnRlcmVzdHMiOltdLCJkZWxldGVkQXQiOm51bGwsImNyZWF0ZWRBdCI6IjIwMjQtMDktMDRUMTA6NTM6MDYuNTE1WiIsInVwZGF0ZWRBdCI6IjIwMjQtMDktMDRUMTA6NTM6MDYuNTE1WiIsImlhdCI6MTcyNTQ0NzQwMCwiZXhwIjoxNzI1NDUxMDAwfQ.qgZoAuZL1EpogrM4nm7MJ14FQ_PogIkuBsBRLSSPSo8
###


# @name refreshToken
Post {{base_url}}/auth/refresh
Content-Type: application/json
Accept: application/json

{
    "refresh_token": "{{refresh_token}}"
}
###

# @name logout
Post {{base_url}}/auth/logout
Content-Type: application/json
Accept: application/json
Authorization: {{bearer}} {{access_token}}
###

# @name update_profile
PUT {{base_url}}/auth/profile
Content-Type: application/json
Accept: application/json
Authorization: {{bearer}} {{access_token}}

{
    "firstname": "John",
    "lastname": "Doe",
}
###

# @name update_email
PUT {{base_url}}/auth/email
Content-Type: application/json
Accept: application/json
Authorization: {{bearer}} {{access_token}}

{
    "email": ""
}
###

# @name update_avatar
PUT {{base_url}}/auth/avatar
Accept: application/json
Authorization: {{bearer}} {{access_token}}

{
    "avatar": "avatar.jpg"
}

# @name update_password
PUT {{base_url}}/auth/password
Content-Type: application/json
Accept: application/json
Authorization: {{bearer}} {{access_token}}

{
    "old_password": "password",
    "new_password": "password123",
}

# @name forgot_password
POST {{base_url}}/auth/forgot-password
Content-Type: application/json

{
    "email": "johndoe4@gmail.com"
}
###

# @name change_password
PUT {{base_url}}/auth/change-password
Content-Type: application/json
Accept: application/json
Authorization: {{bearer}} {{access_token}}

{
    "old_password": "password",
    "new_password": "password123",
}
###

# @name send_otp
POST {{base_url}}/auth/verify-phone
Content-Type: application/json

{
    "phone": "+22871255635"
}
###

# @name verify_otp
POST {{base_url}}/auth/verify-otp
Content-Type: application/json
Authorization: {{bearer}} {{otp_token}}

{
    "otp": "471819",
    "device": {
        "id": "skdfsjdfhkw23232",
        "platform": "android",
        "version": "10",
        "model": "Samsung Galaxy S10",
        "token": "dklsfksdjfljflasjdl"
    }
}
###

# @name complete_profile
POST {{base_url}}/auth/complete-profile
Content-Type: application/json
Authorization: {{bearer}} eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY2ZDFmZjU4ZjEyYzA4ZjY1ZGQ0MDc1ZCIsInVzZXJuYW1lIjoiKzIyODcxMjU1NjM1NDIzMCIsInBob25lIjoyMjg3MTI1NTYzNSwiZ2VuZGVyIjoiVSIsInJvbGUiOiJ1c2VyIiwiZGVmYXVsdFVzZXJuYW1lIjp0cnVlLCJhdXRoTWV0aG9kcyI6WyJwaG9uZSJdLCJpc0FjdGl2ZSI6dHJ1ZSwiY29tcGxldGVkIjpmYWxzZSwiaW50ZXJlc3RzIjpbXSwiY3JlYXRlZEF0IjoiMjAyNC0wOC0zMFQxNzoyMDoyNC42NzBaIiwidXBkYXRlZEF0IjoiMjAyNC0wOC0zMFQxNzoyMDoyNC42NzBaIiwiaWF0IjoxNzI1MDM4NDI0LCJleHAiOjE3MjUwNDIwMjR9.UBe6_iXIFGJaBRvl40nylV1xftE46hoXkrD0YGIO8Jc

{
    "firstname": "John",
    "lastname": "Doe",
    "username": "johndoe17",
    "email": "aroamadou@gmail.com",
    "birthdate": "2010-01-01",
    "address": "Jl. Jend. Sudirman No. 1",
    "interests": ["football", "music", "dance"]
}
###

# @name Check email unicity
POST {{base_url}}/auth/check-credential
Content-Type: application/json

{
    "email": "aroamadou@gmail.com"
}

###

# @name Check username unicity
POST {{base_url}}/auth/check-credential
Content-Type: application/json

{
    "username": "johndoe17"
}

###

# @name Check phone unicity
POST {{base_url}}/auth/check-credential
Content-Type: application/json

{
    "phone": "+22892942601"
}
###
